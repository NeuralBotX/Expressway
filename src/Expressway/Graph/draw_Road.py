# encoding:utf-8
'''
@author: Yawen Tan
@project: Expressway
@file: draw_Road.py
@time: 2024/3/21 21:14
@desc:
'''
# 引入类的头文件
from Expressway.Graph.Head import Head_Network
from Expressway.Graph.Network import AboutNetwork


# 调取局内文件代码
from Expressway.Dataset.Filter_Data import ExpressData
from Expressway.Dataset.Extract_Data import Position
from Expressway.Tool.Buffer import SaveLoad


# 引入第三方库
import time
import networkx as nx
import matplotlib.pyplot as plt
import random
from tqdm import tqdm

import geopandas as gpd
G = nx.Graph()
#a = ['131353@0', '131353@170', '131354@202', '131355@1', '131355@53', '131356@1', '131356@246', '131357@263', '131358@1', '131358@27', '131359@1', '131359@194', '131360@254', '131361@1', '131362@0', '131362@1', '131362@219', '131361@202', '131364@200', '131365@202', '131366@1', '131366@199', '131368@0', '131368@1', '131368@211', '131369@168', '131370@108', '131371@1', '131371@138', '131372@1', '131372@411', '131373@1', '131373@487', '131374@250', '131375@259', '131376@241', '131377@218', '131378@218', '131379@1', '131379@134', '131380@1', '131380@107', '131382@0', '131382@1', '131382@146', '131383@173', '131385@0', '131386@0', '131386@280', '131387@1', '131387@234', '131388@310', '131389@280', '131390@350', '131391@1', '131391@380', '131392@1', '131392@326', '131393@1', '131393@303', '131394@1', '131394@213', '131395@1', '131395@169', '131396@1', '131396@13', '131397@1', '131397@91', '131398@1', '131399@0', '131399@1', '131399@264', '131400@1', '131400@245', '131401@219', '131402@1', '131402@68', '131403@1', '131404@0', '131404@1', '131404@296', '131405@1', '131405@441', '131406@1', '131406@588', '131407@1', '131407@381', '131408@771', '131410@179', '131411@1', '131385@144', '131412@1', '131412@176', '131413@1', '131414@0', '131414@189', '131415@140', '131416@32', '131417@155', '131418@1', '131418@123', '131419@1', '131419@113', '131420@56', '131421@142', '131422@201', '131423@1', '131423@270', '131425@0', '131425@125', '131426@1', '131426@182', '131427@101', '131428@1', '131428@227', '131429@205', '131430@1', '131424@190', '131431@1', '131431@197', '131432@17', '131433@44', '131434@1', '131434@53', '131435@1', '131435@279', '131436@131', '131438@0', '131438@1', '131438@508', '131439@1', '131440@0', '131440@1', '131440@636', '131442@0', '131442@1', '131441@730', '131439@672', '131444@1', '131444@413', '131446@228', '131448@1', '131448@116', '131449@1', '131449@207', '131450@1', '131450@173', '131451@126', '131453@0', '131453@1', '131453@45', '131454@176', '131455@121', '131456@260', '131457@1', '131457@264', '131458@1', '131458@269', '131459@1', '131459@19', '131461@0', '131461@1', '131461@149', '131462@156', '131463@1', '131464@0', '131464@1', '131463@240', '131465@1', '131464@278', '131466@1', '131466@128', '131467@243', '131468@1', '131468@930', '131469@588', '131470@281', '131471@1', '131471@277', '131472@1', '131472@147', '131473@1', '131473@275', '131474@1', '131474@177', '131488@0', '131488@1', '131488@580', '131489@657', '131490@59', '131491@367', '131492@578', '131493@1', '131493@671', '131494@114', '131495@198', '131496@1', '131496@224', '131497@1', '131497@404', '131385@2', '131500@176', '131502@297', '131504@1', '131504@672', '131505@576', '131506@638', '131507@440', '131508@325', '131512@0', '131512@324', '131513@171', '131514@1', '131514@187', '131515@364', '131516@1', '131517@1', '131517@234', '131518@163', '131519@1', '131519@192', '131520@242', '131522@0', '131522@1', '131522@339', '131523@1', '131523@245', '131524@1', '131524@173', '131525@1', '131525@209', '131394@212', '131530@1', '131530@10', '131531@30', '131532@42', '131533@1', '131533@166', '131534@1', '131535@0', '131535@1', '131535@204', '131536@1', '131536@253', '131537@259', '131538@1', '131538@158', '131540@0', '131540@1', '131541@0', '131541@1', '131541@156', '131542@1', '131542@149', '131543@1', '131543@141', '131544@1', '131544@268', '131545@226', '131546@1', '131546@41', '131547@1', '131547@221', '131548@267', '131549@260', '131550@1', '131550@233', '131551@108', '131521@247', '131553@268', '131554@1', '131554@259', '131534@148', '131556@1', '131556@182', '131557@62', '131558@1', '131558@311', '131559@258', '131560@1', '131561@0', '131561@874', '131562@1', '131562@1313', '131563@894', '131564@1', '131564@799', '131565@701', '131566@1', '131566@522', '131567@319', '131568@1', '131568@209', '131570@0', '131545@225', '131572@268', '131573@1', '131573@574', '131574@1', '131569@27', '131576@109', '131577@1', '131578@0', '131578@1', '131578@332', '131579@1046', '131580@1', '131580@771', '131581@1', '131583@243', '131584@268', '131585@1', '131586@1', '131586@511', '131587@426', '131588@515', '131590@0', '131590@1', '131590@659', '131591@551', '131592@1', '131577@658', '131597@1', '131597@636', '131598@806', '131599@1', '131599@452', '131600@737', '131601@519', '131602@52', '131603@44', '131604@1', '131574@536', '131606@0', '131606@1', '131606@652', '131607@206', '131608@1', '131608@253', '131609@1', '131609@193', '131610@1', '131371@137', '131612@86', '131614@0', '131614@1', '131614@269', '131615@276', '131616@180', '131617@239', '131619@0', '131619@1', '131619@324', '131618@264', '131621@198', '131622@1', '131622@195', '131623@23', '131624@1', '131625@0', '131625@1', '131625@67', '131626@1', '131626@84', '131627@252', '131628@15', '131629@1', '131629@196', '131630@151', '131631@1', '131631@168', '131632@197', '131633@75', '131634@277', '131635@1', '131624@122', '131636@1', '131636@21', '131637@203', '131638@1', '131638@102', '131640@0', '131640@346', '131641@1', '131641@16', '131642@17', '131644@0', '131644@1', '131644@863', '131645@1', '131645@918', '131646@562', '131647@1', '131647@589', '131648@1', '131648@854', '131649@762', '131650@1', '131651@0', '131651@1', '131651@201', '131653@0', '131653@361', '131654@188', '131655@430', '131656@1', '131432@16', '131423@269', '131421@141', '131664@1', '131664@66', '131665@1', '131666@0', '131666@1', '131666@180', '131667@148', '131668@66', '131652@154', '131665@165', '131671@272', '131673@0', '131673@1', '131673@892', '131675@0', '131675@876', '131676@1', '131676@806', '131677@1', '131677@478', '131678@1', '131678@587', '131679@1', '131679@645', '131680@590', '131681@169', '131682@414', '131683@1', '131683@514', '131688@1', '131668@2', '131690@1', '131690@9', '131691@1', '131691@772', '131692@1', '131693@276', '131694@281', '131616@12', '131697@0', '131697@1', '131697@279', '131698@297', '131699@1', '131699@225', '131700@1', '131700@232', '131701@201', '131702@262', '131703@1', '131703@38', '131418@122', '131416@31', '131708@287', '131709@1', '131709@162', '131710@1', '131710@121', '131711@183', '131712@1', '131704@86', '131713@196', '131714@1', '131716@1', '131716@83', '131420@55', '131419@112', '132077@0', '132077@1', '132077@391', '132078@1', '132078@448', '132080@0', '132080@1', '132080@183', '132082@0', '132082@1', '132082@729', '132084@0', '132084@1', '132084@295', '132085@1', '132085@404', '132086@1', '132087@0', '132087@1', '132569@0', '132569@1', '132569@584', '132570@1', '132570@528', '132571@478', '132572@1', '132572@664', '132573@663', '132575@0', '132575@1', '132576@0', '132576@1', '132576@755', '132577@1', '132577@539', '132578@555', '132579@53', '132580@536', '132582@1', '132582@268', '132583@226', '132584@116', '132585@276', '132586@1', '132586@187', '132588@1', '132589@0', '132589@1', '132767@0', '132767@1', '132767@604', '132768@1', '132768@273', '132769@523', '132770@1', '132771@0', '132771@1', '132772@0', '132772@660', '132773@1', '132773@1070', '132774@802', '132775@421', '132776@60', '132777@90', '132778@1', '132778@636', '132779@1', '132779@645', '132771@25', '132781@1', '132782@0', '132782@1', '132783@0', '132783@1', '132783@697', '132784@388', '132785@464', '132786@1', '132786@336', '132788@0', '132788@1', '132789@0', '132789@1', '132789@183', '132790@382', '132791@1', '132791@742', '132792@1', '132792@517', '132793@1', '132794@0', '132794@1', '132794@174', '132796@1', '132796@548', '132795@217', '132798@1', '132798@1018', '132799@1', '132799@435', '132800@1', '132800@4', '133152@1', '133152@85', '133153@1', '133153@899', '133154@1057', '133324@0', '133324@1', '133326@0', '133326@1', '133326@1581', '133327@1', '133327@1716', '133328@1151', '133329@1', '133329@1072', '133822@0', '133822@1', '133822@800', '133823@1', '133823@859', '133824@1', '133824@242', '133825@836', '133826@901', '133827@1', '133827@605', '133828@909', '133829@715', '133830@746', '133847@0', '133847@1', '133847@432', '133848@1', '133848@375', '133850@0', '133850@1', '133850@853', '133851@1', '133851@540', '133852@1', '133854@0', '133854@1', '133854@953', '133855@1', '133856@1', '133857@1', '133857@644', '133858@1', '133858@286', '131654@2', '131655@2', '133861@429', '133862@206', '133863@1', '133863@459', '133864@519', '133866@0', '133866@1', '133867@0', '133867@1', '133867@224', '133869@0', '133869@1', '133869@871', '133870@853', '133871@1', '133871@805', '133872@1', '133872@128', '133873@1', '133873@760', '133874@873', '133875@1', '133875@809']
#b = [('131353@0', '131448@1'), ('131354@202', '131355@1'), ('131355@53', '131356@1'), ('131355@53', '131444@413'), ('131357@263', '131358@1'), ('131358@27', '131359@1'), ('131360@254', '131361@1'), ('131362@0', '131362@1'), ('131365@202', '131366@1'), ('131368@0', '131368@1'), ('131370@108', '131371@1'), ('131371@138', '131372@1'), ('131371@138', '131371@137'), ('131372@411', '131373@1'), ('131378@218', '131379@1'), ('131379@134', '131380@1'), ('131382@0', '131382@1'), ('131385@0', '131385@2'), ('131386@280', '131387@1'), ('131390@350', '131391@1'), ('131391@380', '131392@1'), ('131392@326', '131393@1'), ('131393@303', '131394@1'), ('131394@213', '131395@1'), ('131394@213', '131394@212'), ('131395@169', '131396@1'), ('131396@13', '131397@1'), ('131397@91', '131398@1'), ('131397@91', '131530@1'), ('131399@0', '131399@1'), ('131399@264', '131400@1'), ('131401@219', '131402@1'), ('131402@68', '131403@1'), ('131404@0', '131404@1'), ('131404@296', '131405@1'), ('131405@1', '131502@297'), ('131405@441', '131406@1'), ('131405@441', '131504@1'), ('131406@588', '131407@1'), ('131410@179', '131411@1'), ('131385@144', '131412@1'), ('131412@176', '131413@1'), ('131416@32', '131416@31'), ('131417@155', '131418@1'), ('131418@123', '131419@1'), ('131418@123', '131418@122'), ('131419@113', '131419@112'), ('131420@56', '131664@1'), ('131420@56', '131420@55'), ('131421@142', '131421@141'), ('131422@201', '131423@1'), ('131423@270', '131423@269'), ('131425@125', '131426@1'), ('131427@101', '131428@1'), ('131429@205', '131430@1'), ('131424@190', '131431@1'), ('131432@17', '131432@16'), ('131433@44', '131434@1'), ('131434@53', '131435@1'), ('131438@0', '131438@1'), ('131438@0', '131597@1'), ('131438@508', '131439@1'), ('131440@0', '131440@1'), ('131442@0', '131442@1'), ('131439@672', '131444@1'), ('131448@116', '131449@1'), ('131449@207', '131450@1'), ('131453@0', '131453@1'), ('131456@260', '131457@1'), ('131457@264', '131458@1'), ('131458@269', '131459@1'), ('131461@0', '131461@1'), ('131462@156', '131463@1'), ('131464@0', '131464@1'), ('131463@240', '131465@1'), ('131464@278', '131466@1'), ('131467@243', '131468@1'), ('131469@588', '131586@1'), ('131470@281', '131471@1'), ('131471@277', '131472@1'), ('131472@147', '131473@1'), ('131473@275', '131474@1'), ('131488@0', '131488@1'), ('131489@657', '131517@1'), ('131492@578', '131493@1'), ('131495@198', '131496@1'), ('131496@224', '131497@1'), ('131513@171', '131514@1'), ('131515@364', '131516@1'), ('131518@163', '131519@1'), ('131522@0', '131522@1'), ('131522@339', '131523@1'), ('131523@245', '131524@1'), ('131524@173', '131525@1'), ('131532@42', '131533@1'), ('131533@166', '131534@1'), ('131535@0', '131535@1'), ('131535@204', '131536@1'), ('131537@259', '131538@1'), ('131540@0', '131540@1'), ('131541@0', '131541@1'), ('131541@156', '131542@1'), ('131542@149', '131543@1'), ('131543@141', '131544@1'), ('131545@226', '131546@1'), ('131545@226', '131545@225'), ('131546@41', '131547@1'), ('131549@260', '131550@1'), ('131553@268', '131554@1'), ('131534@148', '131556@1'), ('131557@62', '131558@1'), ('131559@258', '131560@1'), ('131561@874', '131562@1'), ('131563@894', '131564@1'), ('131565@701', '131566@1'), ('131567@319', '131568@1'), ('131568@1', '133152@1'), ('131572@268', '131573@1'), ('131573@574', '131574@1'), ('131576@109', '131577@1'), ('131578@0', '131578@1'), ('131579@1046', '131580@1'), ('131580@771', '131581@1'), ('131584@268', '131585@1'), ('131590@0', '131590@1'), ('131591@551', '131592@1'), ('131598@806', '131599@1'), ('131603@44', '131604@1'), ('131606@0', '131606@1'), ('131607@206', '131608@1'), ('131608@253', '131609@1'), ('131609@193', '131610@1'), ('131614@0', '131614@1'), ('131619@0', '131619@1'), ('131621@198', '131622@1'), ('131622@195', '133856@1'), ('131623@23', '131624@1'), ('131625@0', '131625@1'), ('131625@67', '131626@1'), ('131628@15', '131629@1'), ('131630@151', '131631@1'), ('131632@197', '132582@1'), ('131633@75', '132580@536'), ('131634@277', '131635@1'), ('131624@122', '131636@1'), ('131637@203', '131638@1'), ('131638@102', '131716@1'), ('131640@346', '131641@1'), ('131644@0', '131644@1'), ('131644@863', '131645@1'), ('131646@562', '131647@1'), ('131647@589', '131648@1'), ('131649@762', '131650@1'), ('131651@0', '131651@1'), ('131653@361', '131654@2'), ('131654@188', '131655@2'), ('131655@430', '131656@1'), ('131664@66', '131665@1'), ('131666@0', '131666@1'), ('131666@180', '131688@1'), ('131667@148', '131668@2'), ('131668@66', '131690@1'), ('131673@0', '131673@1'), ('131675@0', '133857@1'), ('131675@876', '131676@1'), ('131676@806', '131677@1'), ('131677@478', '131678@1'), ('131678@587', '131679@1'), ('131682@414', '131683@1'), ('131690@9', '131691@1'), ('131691@772', '131692@1'), ('131694@281', '131616@12'), ('131697@0', '131697@1'), ('131698@297', '131699@1'), ('131699@225', '131700@1'), ('131702@262', '131703@1'), ('131708@287', '131709@1'), ('131709@162', '131710@1'), ('131711@183', '131712@1'), ('131713@196', '131714@1'), ('132077@0', '132077@1'), ('132077@391', '132078@1'), ('132080@0', '132080@1'), ('132082@0', '132082@1'), ('132084@0', '132084@1'), ('132084@295', '132085@1'), ('132085@404', '132086@1'), ('132087@0', '132087@1'), ('132569@0', '132569@1'), ('132569@584', '132570@1'), ('132571@478', '132572@1'), ('132575@0', '132575@1'), ('132576@0', '132576@1'), ('132576@755', '132577@1'), ('132584@116', '132588@1'), ('132585@276', '132586@1'), ('132589@0', '132589@1'), ('132767@0', '132767@1'), ('132767@604', '132768@1'), ('132769@523', '132770@1'), ('132771@0', '132771@1'), ('132772@660', '132773@1'), ('132777@90', '132778@1'), ('132778@636', '132779@1'), ('132771@25', '132781@1'), ('132782@0', '132782@1'), ('132782@0', '132796@1'), ('132783@0', '132783@1'), ('132785@464', '132786@1'), ('132788@0', '132788@1'), ('132789@0', '132789@1'), ('132790@382', '132791@1'), ('132791@742', '132792@1'), ('132792@517', '132793@1'), ('132794@0', '132794@1'), ('132795@217', '132798@1'), ('132798@1018', '132799@1'), ('132799@435', '132800@1'), ('133152@85', '133153@1'), ('133324@0', '133324@1'), ('133326@0', '133326@1'), ('133326@1581', '133327@1'), ('133328@1151', '133329@1'), ('133822@0', '133822@1'), ('133822@800', '133823@1'), ('133823@859', '133824@1'), ('133826@901', '133827@1'), ('133847@0', '133847@1'), ('133847@432', '133848@1'), ('133850@0', '133850@1'), ('133850@853', '133851@1'), ('133851@540', '133852@1'), ('133854@0', '133854@1'), ('133854@953', '133855@1'), ('133857@644', '133858@1'), ('133862@206', '133863@1'), ('133866@0', '133866@1'), ('133867@0', '133867@1'), ('133869@0', '133869@1'), ('133870@853', '133871@1'), ('133871@805', '133872@1'), ('133872@128', '133873@1'), ('133874@873', '133875@1')]


ExpressData_1 = ExpressData('E:/Expressway/.chongqing/Graph/road/处理后数据集/22GIS.shp')
Position_1 = Position('E:/Expressway/.chongqing/Graph/road/处理后数据集/22GIS.shp')
pos = Position_1.road_pos_overturn
for idx in tqdm(range(ExpressData_1.number), desc='Load foundation network', unit="file"):
    if ExpressData_1.data_type[idx] == 'LineString':
         nodes, edges = Head_Network.generate_nodes_and_edges(ExpressData_1.Express_Data[idx], Position_1.road_pos)
#print(len(edges))
G.add_nodes_from(nodes)
G.add_edges_from(edges)
G.remove_edges_from(nx.selfloop_edges(G))
nx.draw(G, node_size = 0.1, pos=pos, edge_color = 'b',width = 1)
print(len(G.nodes()))
print(len(G.edges()))

plt.show()







